{% extends "base.html" %}
{% load wagtailcore_tags wagtailroutablepage_tags %}

{% block content %}

    {% include "includes/page_title.html" with page=page heroclass='is-success light-green-info-gradient' subtitleclass='has-text-primary' %}

    {% if tag %}
        <div class="box">
            <div class="container">
                <nav class="breadcrumb" aria-label="breadcrumbs">
                  <ul>
                    <li><a href="{% pageurl page %}">{{ page.title }}</a></li>
                    <li class="is-active"><a href="#">{{ tag|title }}</a></li>
                  </ul>
                </nav>
            </div>
        </div>
    {% endif %}

    {% if suburb %}
        <div class="box">
            <div class="container">
                <nav class="breadcrumb" aria-label="breadcrumbs">
                  <ul>
                    <li><a href="{% pageurl page %}">{{ page.title }}</a></li>
                    <li class="is-active"><a href="#">{{ suburb.name|title }}</a></li>
                  </ul>
                </nav>
            </div>
        </div>
    {% endif %}

    <section class="section">
        <div class="container">
            {% if tag %}
                <div class='notification is-info is-light'>
                    <p>Showing events tagged with: <strong>{{ tag|title }}</strong></p>
                </div>
            {% endif %}
            {% if suburb %}
                <div class='notification is-info is-light'>
                    <p>Showing events from: <strong>{{ suburb|title }}</strong></p>
                </div>
            {% endif %}      
            <div class="tags are-large">
                {% for tag in page.get_child_tags  %}
                      <a class="tag py-5 px-5 is-rounded has-text-white has-background-success" href="{{ tag.url }}">{{ tag.name|title }}</a>
                {% endfor %}
                {% for suburb in page.get_child_suburbs  %}
                    <a class="tag py-5 px-5 is-rounded has-text-white has-background-success" href="{% routablepageurl page "suburb_archive" suburb.slug %}">{{ suburb.name|title }}</a>    
                {% endfor %}
            </div>
        </div>
    </section>

    <section class="section pt-0">
        <div class="container">
            <div class="columns is-multiline">
                {% for event in events %}
                    <div class="column is-one-third">
                        {% include "includes/card.html" with page=event class="event" buttonclass='has-text-primary has-background-white' footerclass="has-background-success" buttontext='See details' %}
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <section class="mb-6">
        {% if events.paginator.count > 1 %}
            <div class="container">
                {% include "includes/pagination.html" with subpages=events %}
            </div>
        {% endif %}
    </section>

{% endblock %}